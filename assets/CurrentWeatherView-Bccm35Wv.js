import{_ as g,c as n,a as t,b as c,t as s,d as u,o as i}from"./index-EZuAnFjS.js";const d="8be69ae744df69dce08d56cd0ac0f417",m={name:"CurrentWeatherView",data(){return{lat:null,lon:null,weatherData:null,locationName:"",loading:!0,errorMessage:""}},computed:{temperature(){return this.weatherData?Math.floor(this.weatherData.current.temp):null},iconUrl(){return this.weatherData?`https://openweathermap.org/img/wn/${this.weatherData.current.weather[0].icon}@2x.png`:null}},mounted(){this.fetchCurrentLocationWeather()},methods:{async fetchCurrentLocationWeather(){navigator.geolocation?navigator.geolocation.getCurrentPosition(async a=>{this.lat=a.coords.latitude,this.lon=a.coords.longitude;const r=`https://api.openweathermap.org/geo/1.0/reverse?lat=${this.lat}&lon=${this.lon}&limit=1&appid=${d}`,l=await u.get(r);if(l.data.length>0){const{name:o,country:p}=l.data[0];this.locationName=`${o}, ${p}`}const h=`https://api.openweathermap.org/data/3.0/onecall?lat=${this.lat}&lon=${this.lon}&exclude=minutely,hourly,alerts&appid=${d}&units=metric`,e=await u.get(h);this.weatherData=e.data,this.loading=!1},a=>{this.errorMessage="Unable to retrieve your location.",this.loading=!1,console.error(a)}):(this.errorMessage="Geolocation is not supported by this browser.",this.loading=!1)}}},w={class:"weather-container"},_={key:0},f={key:1,class:"error"},y={key:2},D=["src"];function v(a,r,l,h,e,o){return i(),n("div",w,[r[0]||(r[0]=t("h1",null,"Current Location Weather",-1)),e.loading?(i(),n("p",_,"Detecting your location...")):c("",!0),e.errorMessage?(i(),n("p",f,s(e.errorMessage),1)):c("",!0),e.weatherData?(i(),n("main",y,[t("h2",null,s(e.locationName),1),t("div",null,[t("img",{src:o.iconUrl,alt:"Weather Icon"},null,8,D),t("p",null,s(o.temperature)+" Â°C",1)]),t("span",null,s(e.weatherData.current.weather[0].description),1)])):c("",!0)])}const k=g(m,[["render",v],["__scopeId","data-v-3cc3df3e"]]);export{k as default};
